$(function(){if($(".ddsmoothmenu").length!==0){$(".ddsmoothmenu").append("<li id='tick'><span></span></li>");var a=$("#tick");if($(".ddsmoothmenu .selected").length!==0){a.width($(".selected").width()).css("left",$(".selected a").position().left).data("oLeft",a.position().left).data("oWidth",a.width())}else{a.width($(".ddsmoothmenu li:first a").width()+37).css("left",$(".ddsmoothmenu li:first a").position().left).data("oLeft",a.position().left).data("oWidth",a.width())}$(".ddsmoothmenu li a").hover(function(){a.stop().animate({left:$(this).position().left,width:$(this).parent().width()})},function(){a.stop().animate({left:a.data("oLeft"),width:a.data("oWidth")})})}});email_regex=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);zip_regex=new RegExp(/^\d{5}([\-]\d{4})?$/);var current_date=new Date();$.fn.validate=function(a){var b={type:null},a=$.extend(b,a);var c=false;$(this).each(function(){e=$(this);v=$.trim(e.val());if(e.val()!=e.attr("rel")){if((a.type===null||a.type=="email"||a.type=="select"||a.type=="credit_card"||a.type=="month"||a.type=="sec_code")&&v===""){required(e)}else{if(a.type=="price"&&(v=="$"||v=="$0")){required(e)}else{if(a.type=="price"&&v.match(/[^0-9$]+|\${2,}|\d{4,}|\d+\$/)){invalid(e)}else{if(a.type=="title"&&(v===""||v==$(this).attr("rel"))){required(e)}else{if(a.type=="note"&&(v===""||v==$(this).attr("rel"))){required(e)}else{if(a.type=="required"&&(v===""||v==$(this).attr("rel"))){required(e)}else{if(a.type=="email"&&!email_regex.test(v)){invalid(e)}else{if(a.type=="zip"&&!zip_regex.test(v)){invalid(e)}else{if(a.type=="password"&&(v.length<6)){invalid(e)}else{if(a.type=="credit_card"&&(v.length<13||v.length>16||v.match(/\D/))){invalid(e)}else{if(a.type=="month"&&v<current_date.getMonth()){invalid(e)}else{if(a.type=="sec_code"&&(v.length<3||v.length>4||v.match(/\D/))){invalid(e)}else{e.removeClass("invalid");e.next(".arrow").remove();c=true}}}}}}}}}}}}}else{required(e)}});return c};function required(a){a.addClass("invalid");$('<div class="arrow">Required</div>').insertAfter(a);$.each(a,function(){$(this).next(".arrow").position({my:"left center",at:"right center",of:$(this),offset:"-20 0",collision:"none"})});goLocal.utility.trackEvent("validate/failed-require/"+$(a).attr("id"))}function invalid(a){a.addClass("invalid");$('<div class="arrow">Invalid</div>').insertAfter(a);$.each(a,function(){$(this).next(".arrow").position({my:"left center",at:"right center",of:$(this),offset:"-20 0",collision:"none"})});goLocal.utility.trackEvent("validate/failed-invalid/"+$(a).attr("id"))}$(".invalid,.required").live("focus",function(){$(this).next(".arrow").hide();$(this).removeClass("invalid")});$.fn.ohSnap=function(a){(function(c){c.fn.center=function(d){var f={sTop:function(){return window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},wHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight},sLeft:function(){return window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft},wWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth}};return this.each(function(i){if(i==0){var n=c(this);var m=n.width();var l=n.height();var k=f.sTop()+f.wHeight()/2-l/2;var j=f.sLeft()+f.wWidth()/2-m/2;n.css({position:"absolute",marginTop:"-50px",top:k,marginLeft:"-50px",left:j})}})}})(jQuery);var b={headline:null,message:null,optionalClass:null,contentProvider:null,cloneContentProvider:null},a=$.extend(b,a);$("#error-headline").html(a.headline);if(a.cloneContentProvider!==null){a.cloneContentProvider.clone().appendTo("#error-message")}else{if(a.contentProvider!==null){a.contentProvider.detach().appendTo("#error-message")}else{$("#error-message").html(a.message)}}if(a.optionalClass!==null){$("#error").addClass(a.optionalClass)}$("#error").fadeIn(function(){$("#oh-snap").fadeIn().center()})};$("#error .close,#error .x").live("click",function(){$("#oh-snap").fadeOut(200,function(){$("#error").fadeOut();$(".arrow").remove()})});$.fn.preview=function(a){(function(c){c.fn.center=function(d){var f={sTop:function(){return window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},wHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight},sLeft:function(){return window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft},wWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth}};return this.each(function(i){if(i==0){var n=c(this);var m=n.width();var l=n.height();var k=f.sTop()+f.wHeight()/2-l/2;var j=f.sLeft()+f.wWidth()/2-m/2;n.css({position:"absolute",marginTop:"-50px",top:k,marginLeft:"-50px",left:j})}})}})(jQuery);var b={headline:null,message:null},a=$.extend(b,a);$("#preview-headline").html(a.headline);$("#preview-message").html(a.message);$("#preview").fadeIn(200,function(){$("#preview-box").fadeIn().center()})};$("#preview .close,#preview .x").live("click",function(){$("#preview-box").fadeOut(200,function(){$("#preview").fadeOut()})});$(window).bind("scroll resize",function(){if($("#error,#preview")){$("#error,#preview").height($(document).height())}});$(document).ready(function(){$("input").focus(function(){if($(this).val()==$(this).attr("rel")){$(this).val("")}});$("input").blur(function(){if($(this).val()===""){$(this).val($(this).attr("rel"))}});$("#hi").click(function(){$("#logged-in ul").slideToggle();return false});$("#forgot-password-auto").live("click",function(){var b=$("#existing_email").val();if(!b){b=$("#email-address-desktop-login").val()}var a=window.location.href;window.location="/forgot-password-auto?email="+encodeURIComponent(b)+"&redirect="+a;return false});$(".pop").hover(function(){if($(".pop-box").length==0){$(this).append('<div class="pop-box">Sign up to get awesome deals, gift ideas in your city, and more!<div class="ts"></div><div class="t"></div></div>')}else{$(".pop-box").show()}return false},function(){$(".pop-box").hide()});if(!Modernizr.input.placeholder){$("input").not('input[type="hidden"]').each(function(){var b=$(this);var a=b.attr("placeholder");b.attr("rel",a);b.val(a)});$("input").live("focus",function(){if($(this).val()==$(this).attr("rel")){$(this).val("")}});$("input").live("blur",function(){if($(this).val()===""){$(this).val($(this).attr("rel"))}})}});Giftly={slugify:function(b){var a=b.replace(/ /g,"-");a=a.replace(/,/g,"-");a=a.replace(/--/g,"-");a=a.toLowerCase();return a},getBrowserInfo:function(){var d=goLocal.utility.escapeFromUTF8(navigator.userAgent);var f=goLocal.utility.escapeFromUTF8($(window).width()+"x"+$(window).height());var c="";for(var b=0;b<navigator.plugins.length;b++){c=c+navigator.plugins[b].description+";"}var a=goLocal.utility.escapeFromUTF8(c);return[d,f,a]},secureURL:function(a){if(location.protocol=="https:"){a=a.replace("http:","https:")}return a}};window.Modernizr=function(ap,ao,an){function O(){al.input=function(f){for(var d=0,g=f.length;d<g;d++){R[f[d]]=!!(f[d] in ae)}return R}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),al.inputtypes=function(b){for(var l=0,k,j,g,c=b.length;l<c;l++){ae.setAttribute("type",j=b[l]),k=ae.type!=="text",k&&(ae.value=ad,ae.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(j)&&ae.style.WebkitAppearance!==an?(aj.appendChild(ae),g=ao.defaultView,k=g.getComputedStyle&&g.getComputedStyle(ae,null).WebkitAppearance!=="textfield"&&ae.offsetHeight!==0,aj.removeChild(ae)):/^(search|tel)$/.test(j)||(/^(url|email)$/.test(j)?k=ae.checkValidity&&ae.checkValidity()===!1:/^color$/.test(j)?(aj.appendChild(ae),aj.offsetWidth,k=ae.value!=ad,aj.removeChild(ae)):k=ae.value!=ad)),T[b[l]]=!!k}return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function Q(g,f){var i=g.charAt(0).toUpperCase()+g.substr(1),h=(g+" "+Z.join(i+" ")+i).split(" ");return !!S(h,f)}function S(f,c){for(var g in f){if(af[f[g]]!==an&&(!c||c(f[g],ag))){return !0}}}function U(d,c){return(""+d).indexOf(c)!==-1}function W(d,c){return typeof d===c}function Y(d,c){return aa(ab.join(d+";")+(c||""))}function aa(b){af.cssText=b}var am="1.7",al={},ak=!0,aj=ao.documentElement,ai=ao.head||ao.getElementsByTagName("head")[0],ah="modernizr",ag=ao.createElement(ah),af=ag.style,ae=ao.createElement("input"),ad=":)",ac=Object.prototype.toString,ab=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),Z="Webkit Moz O ms Khtml".split(" "),X={svg:"http://www.w3.org/2000/svg"},V={},T={},R={},P=[],N,M=function(b){var h=ao.createElement("style"),g=ao.createElement("div"),f;h.textContent=b+"{#modernizr{height:3px}}",ai.appendChild(h),g.id="modernizr",aj.appendChild(g),f=g.offsetHeight===3,h.parentNode.removeChild(h),g.parentNode.removeChild(g);return !!f},K=function(){function c(h,g){g=g||ao.createElement(b[h]||"div");var a=(h="on"+h) in g;a||(g.setAttribute||(g=ao.createElement("div")),g.setAttribute&&g.removeAttribute&&(g.setAttribute(h,""),a=W(g[h],"function"),W(g[h],an)||(g[h]=an),g.removeAttribute(h))),g=null;return a}var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return c}(),J=({}).hasOwnProperty,I;W(J,an)||W(J.call,an)?I=function(d,c){return c in d&&W(d.constructor.prototype[c],an)}:I=function(d,c){return J.call(d,c)},V.flexbox=function(){function j(k,f,m,l){k.style.cssText=ab.join(f+":"+m+";")+(l||"")}function b(k,f,m,l){f+=":",k.style.cssText=(f+ab.join(m+";"+f)).slice(0,-f.length)+(l||"")}var i=ao.createElement("div"),h=ao.createElement("div");b(i,"display","box","width:42px;padding:0;"),j(h,"box-flex","1","width:10px;"),i.appendChild(h),aj.appendChild(i);var g=h.offsetWidth===42;i.removeChild(h),aj.removeChild(i);return g},V.canvas=function(){var b=ao.createElement("canvas");return b.getContext&&b.getContext("2d")},V.canvastext=function(){return al.canvas&&W(ao.createElement("canvas").getContext("2d").fillText,"function")},V.webgl=function(){return !!ap.WebGLRenderingContext},V.touch=function(){return"ontouchstart" in ap||M("@media ("+ab.join("touch-enabled),(")+"modernizr)")},V.geolocation=function(){return !!navigator.geolocation},V.postmessage=function(){return !!ap.postMessage},V.websqldatabase=function(){var a=!!ap.openDatabase;return a},V.indexedDB=function(){for(var a=-1,g=Z.length;++a<g;){var f=Z[a].toLowerCase();if(ap[f+"_indexedDB"]||ap[f+"IndexedDB"]){return !0}}return !1},V.hashchange=function(){return K("hashchange",ap)&&(ao.documentMode===an||ao.documentMode>7)},V.history=function(){return !!(ap.history&&history.pushState)},V.draganddrop=function(){return K("dragstart")&&K("drop")},V.websockets=function(){return"WebSocket" in ap},V.rgba=function(){aa("background-color:rgba(150,255,150,.5)");return U(af.backgroundColor,"rgba")},V.hsla=function(){aa("background-color:hsla(120,40%,100%,.5)");return U(af.backgroundColor,"rgba")||U(af.backgroundColor,"hsla")},V.multiplebgs=function(){aa("background:url(//:),url(//:),red url(//:)");return(new RegExp("(url\\s*\\(.*?){3}")).test(af.background)},V.backgroundsize=function(){return Q("backgroundSize")},V.borderimage=function(){return Q("borderImage")},V.borderradius=function(){return Q("borderRadius","",function(b){return U(b,"orderRadius")})},V.boxshadow=function(){return Q("boxShadow")},V.textshadow=function(){return ao.createElement("div").style.textShadow===""},V.opacity=function(){Y("opacity:.55");return/^0.55$/.test(af.opacity)},V.cssanimations=function(){return Q("animationName")},V.csscolumns=function(){return Q("columnCount")},V.cssgradients=function(){var f="background-image:",d="gradient(linear,left top,right bottom,from(#9f9),to(white));",g="linear-gradient(left top,#9f9, white);";aa((f+ab.join(d+f)+ab.join(g+f)).slice(0,-f.length));return U(af.backgroundImage,"gradient")},V.cssreflections=function(){return Q("boxReflect")},V.csstransforms=function(){return !!S(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},V.csstransforms3d=function(){var b=!!S(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);b&&"webkitPerspective" in aj.style&&(b=M("@media ("+ab.join("transform-3d),(")+"modernizr)"));return b},V.csstransitions=function(){return Q("transitionProperty")},V.fontface=function(){var b,l,k=ai||aj,j=ao.createElement("style"),h=ao.implementation||{hasFeature:function(){return !1}};j.type="text/css",k.insertBefore(j,k.firstChild),b=j.sheet||j.styleSheet;var g=h.hasFeature("CSS2","")?function(a){if(!b||!a){return !1}var i=!1;try{b.insertRule(a,0),i=/src/i.test(b.cssRules[0].cssText),b.deleteRule(b.cssRules.length-1)}catch(f){}return i}:function(a){if(!b||!a){return !1}b.cssText=a;return b.cssText.length!==0&&/src/i.test(b.cssText)&&b.cssText.replace(/\r+|\n+/g,"").indexOf(a.split(" ")[0])===0};l=g('@font-face { font-family: "font"; src: url(data:,); }'),k.removeChild(j);return l},V.video=function(){var b=ao.createElement("video"),g=!!b.canPlayType;if(g){g=new Boolean(g),g.ogg=b.canPlayType('video/ogg; codecs="theora"');var f='video/mp4; codecs="avc1.42E01E';g.h264=b.canPlayType(f+'"')||b.canPlayType(f+', mp4a.40.2"'),g.webm=b.canPlayType('video/webm; codecs="vp8, vorbis"')}return g},V.audio=function(){var b=ao.createElement("audio"),d=!!b.canPlayType;d&&(d=new Boolean(d),d.ogg=b.canPlayType('audio/ogg; codecs="vorbis"'),d.mp3=b.canPlayType("audio/mpeg;"),d.wav=b.canPlayType('audio/wav; codecs="1"'),d.m4a=b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/aac;"));return d},V.localstorage=function(){try{return !!localStorage.getItem}catch(b){return !1}},V.sessionstorage=function(){try{return !!sessionStorage.getItem}catch(b){return !1}},V.webWorkers=function(){return !!ap.Worker},V.applicationcache=function(){return !!ap.applicationCache},V.svg=function(){return !!ao.createElementNS&&!!ao.createElementNS(X.svg,"svg").createSVGRect},V.inlinesvg=function(){var b=ao.createElement("div");b.innerHTML="<svg/>";return(b.firstChild&&b.firstChild.namespaceURI)==X.svg},V.smil=function(){return !!ao.createElementNS&&/SVG/.test(ac.call(ao.createElementNS(X.svg,"animate")))},V.svgclippaths=function(){return !!ao.createElementNS&&/SVG/.test(ac.call(ao.createElementNS(X.svg,"clipPath")))};for(var L in V){I(V,L)&&(N=L.toLowerCase(),al[N]=V[L](),P.push((al[N]?"":"no-")+N))}al.input||O(),al.crosswindowmessaging=al.postmessage,al.historymanagement=al.history,al.addTest=function(d,c){d=d.toLowerCase();if(!al[d]){c=!!c(),aj.className+=" "+(c?"":"no-")+d,al[d]=c;return al}},aa(""),ag=ae=null,ak&&ap.attachEvent&&function(){var b=ao.createElement("div");b.innerHTML="<elem></elem>";return b.childNodes.length!==1}()&&function(G,F){function q(h,g){var l=-1,k=h.length,j,i=[];while(++l<k){j=h[l],(g=j.media||g)!="screen"&&i.push(q(j.imports,g),j.cssText)}return i.join("")}function r(d){var c=-1;while(++c<C){d.createElement(D[c])}}var E="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",D=E.split("|"),C=D.length,B=new RegExp("(^|\\s)("+E+")","gi"),A=new RegExp("<(/*)("+E+")","gi"),z=new RegExp("(^|[^\\n]*?\\s)("+E+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),y=F.createDocumentFragment(),x=F.documentElement,w=x.firstChild,u=F.createElement("body"),t=F.createElement("style"),s;r(F),r(y),w.insertBefore(t,w.firstChild),t.media="print",G.attachEvent("onbeforeprint",function(){var b=-1,j=q(F.styleSheets,"all"),d=[],i;s=s||F.body;while((i=z.exec(j))!=null){d.push((i[1]+i[2]+i[3]).replace(B,"$1.iepp_$2")+i[4])}t.styleSheet.cssText=d.join("\n");while(++b<C){var h=F.getElementsByTagName(D[b]),g=h.length,f=-1;while(++f<g){h[f].className.indexOf("iepp_")<0&&(h[f].className+=" iepp_"+D[b])}}y.appendChild(s),x.appendChild(u),u.className=s.className,u.innerHTML=s.innerHTML.replace(A,"<$1font")}),G.attachEvent("onafterprint",function(){u.innerHTML="",x.removeChild(u),x.appendChild(s),t.styleSheet.cssText=""})}(ap,ao),al._enableHTML5=ak,al._version=am,aj.className=aj.className.replace(/\bno-js\b/,"")+" js "+P.join(" ");return al}(this,this.document);